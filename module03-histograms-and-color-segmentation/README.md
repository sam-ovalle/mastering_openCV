# Module 3: Histograms and Color Segmentation

## Module Projects

### M03.01: Histograms

Exercises to obtain the distribution of values across channels of an image, and initial discussion of the use cases

The grayscale Apollo-8-Launch.jpg histogram is found using two methods:

![Alt text](readme/03_01_exercise1.png "Image of calcHist() linear plot versus hist() histogram")

The concept of histogram binning is best explained with this histogram of a checkerboard, containing values of either 0 or 255 at each pixel

![Alt text](readme/03_01_exercise2.png "Image of binning examples with checkerboard image")

calcHist() linear plots are partciularly helpful for viewing histogram distributions across different channels

![Alt text](readme/03_01_exercise3.png "Image of linear histogram plots for BGR channels")

Binary masks + bitwise operations can be used to isolate an object and perform histogram analysis only on that object. In this case, a square was simply pulled from the lake of the Emerald_Lakes_New_Zealand.jpg above

![Alt text](readme/03_01_exercise4.png "Image of isolating a mask of the lake for histogram plots of an object")

A good use case of histograms is improving contrast in an image through histogram equalization, as demonstrated below with parrot.jpg

![Alt text](readme/03_01_exercise5.png "Image of grayscale import of parrot.jpg")
![Alt text](readme/03_01_exercise6.png "Image of improved contrast on parrot image due to histogram equalization")

The same method used in the grayscale image above does not work well with BGR color channels due to the dependency of intensity on hue, thus it is better to first convert to HSV format

![Alt text](readme/03_01_exercise7.png "Image of poor color contrast improvement through equalizing BGR channel histograms")
![Alt text](readme/03_01_exercise8.png "Image of improved color contrast due to equalizing HSV channel histograms instead")

The grayscale version of the equalized HSV parrot image has a better equalized histogram distribution than before due to the accounting of intensity

![Alt text](readme/03_01_exercise9.png "Image of improved grayscale histogram from grayscale conversion of equalized HSV image of parrot")

|

|

|

### M03.02: Color Segmentation

Exercises to isolate components of an image by color using HSV channels

This plot of Hue vs Saturation is helpful in identifying which bands of values should be used to isolate a color

![Alt text](readme/03_02_exercise1.png "Image of Hue vs Saturation plot")

This is a good visual to understand color segmentation. The openCV logo is segmented into masks by red, green, and blue colors

![Alt text](readme/03_02_exercise2.png "Image of RGB segmentation of openCV logo")

In the exercise, I identified the HSV lower and upper band to create a mask of the New Zealand lake using cv2.inRange()

![Alt text](readme/03_02_exercise3.png "Image of color segmentation of New Zealand Lake into mask")

|

|

|

### M03.03: APPLICATION: Deforestation using Color Segmentation

Exercises to use color segmntation to analyze deforestation

Four satellite images of an area across different years are provided

![Alt text](readme/03_03_exercise2.png "Image of satellite imagery of area with forest across the years")

These images can be split into different color channels (BGR) to obtain the histograms

![Alt text](readme/03_03_exercise1.png "Image of blue, red, and green channels of satellite images")
![Alt text](readme/03_03_exercise3.png "Image of histogram plots for BGR color space")

From the histograms, the range of values to be used with the inRange function can be determined, and a binary mask of the forest can be generated

In this case, the binary mask is generated by filtering the green values

![Alt text](readme/03_03_exercise4.png "Image of binary mask of forest generated from satellite image")

Alternatively, histograms and inRange can be used with the HSV color space instead of BGR

![Alt text](readme/03_03_exercise5.png "Image of  histogram plots for the HSV color space")

With the binary mask generated, the percentage of non-zero values represents the amount of forest remaining. Here, BGR and HSV analysis are compared

![Alt text](readme/03_03_exercise6.png "Image of percentages of forest remaining across the year from binary mask analysis across HSV and BGR color spaces")

|

|

|

### M03.04: APPLICATION: Deforestation using GeoTIFF satellite LandSAT channels

Expanding on previous application by using 7 channel LandSat GeoTiff images with the NDVI method to obtain vegetation spectrum from an image and more accurately determine deforestation

The 7 channels of the satellite imagery are detailed below

![Alt text](readme/03_04_exercise1.png "Image of the seven channels of a LandSAT message")

The Normalized Difference Vegetation Index (NDVI) method can be used to calculate a better approximation of vegetation in the image, where these NDVI image binary masks can more accurately determine percentage of vegetation remaining and thus, deforestation rate

![Alt text](readme/03_04_exercise2.png "Image of NDVI method formula from near infrared and red channels")
![Alt text](readme/03_04_exercise3.png "Image of NDVI images and binary masks across the year, more accurately representing loss of vegetation in the area")